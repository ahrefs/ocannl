(copy_files
 (files ../config/ocannl_config))

(test
 (name moons_demo)
 (package neural_nets_lib)
 (modules moons_demo)
 (deps
  ocannl_config
  (env_var OCANNL_BACKEND))
 (libraries ocannl datasets)
 (preprocess
  (pps ppx_here ppx_ocannl)))

(test
 (name moons_demo_mini)
 (package neural_nets_lib)
 (modules moons_demo_mini)
 (deps
  ocannl_config
  (env_var OCANNL_BACKEND))
 (libraries ocannl datasets)
 (preprocess
  (pps ppx_here ppx_ocannl)))

(test
 (name moons_demo_parallel)
 (package neural_nets_lib)
 (modules moons_demo_parallel)
 (deps
  ocannl_config
  (env_var OCANNL_BACKEND))
 (libraries ocannl datasets)
 (preprocess
  (pps ppx_here ppx_ocannl)))

(test
 (name bigram)
 (package neural_nets_lib)
 (modules bigram)
 (deps
  ../../datasets/names.txt
  ocannl_config
  (env_var OCANNL_BACKEND))
 (libraries ocannl datasets)
 (preprocess
  (pps ppx_here ppx_ocannl)))

(test
 (name bigram_mlp)
 (package neural_nets_lib)
 (modules bigram_mlp)
 (deps
  ../../datasets/names.txt
  ocannl_config
  (env_var OCANNL_BACKEND))
 (libraries ocannl datasets)
 (preprocess
  (pps ppx_here ppx_ocannl)))
