<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dataset_utils (neural_nets_lib.Datasets.Dataset_utils)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">neural_nets_lib</a> &#x00BB; <a href="../index.html">Datasets</a> &#x00BB; Dataset_utils</nav><header class="odoc-preamble"><h1>Module <code><span>Datasets.Dataset_utils</span></code></h1><p>Utilities for downloading and managing datasets.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-get_cache_dir"><a href="#val-get_cache_dir" class="anchor"></a><code><span><span class="keyword">val</span> get_cache_dir : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the platform-specific cache directory path for the given dataset.</p><p>The default location is &quot;~/.cache/ocannl/datasets/<code>dataset_name</code>/&quot;.</p><p>Parameters</p><ul><li>dataset_name: the name of the dataset.</li></ul><p>Returns</p><ul><li>the cache directory path, including trailing slash.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-download_file"><a href="#val-download_file" class="anchor"></a><code><span><span class="keyword">val</span> download_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Download a file from a URL to a destination path.</p><p>Creates parent directories as needed, downloads the file from <code>url</code>, and saves it to <code>dest_path</code>.</p><p>Parameters</p><ul><li>url: the source URL of the file.</li><li>dest_path: local path to save the downloaded file.</li></ul><p>Raises</p><ul><li><code>Failure</code> on download or write error.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ensure_file"><a href="#val-ensure_file" class="anchor"></a><code><span><span class="keyword">val</span> ensure_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Ensure a file exists at the given path, downloading if necessary.</p><p>Checks if <code>dest_path</code> exists. If not, downloads the file from <code>url</code>.</p><p>Parameters</p><ul><li>url: the source URL of the file.</li><li>dest_path: local path to ensure the file exists.</li></ul><p>Raises</p><ul><li><code>Failure</code> on download or write error.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ensure_extracted_archive"><a href="#val-ensure_extracted_archive" class="anchor"></a><code><span><span class="keyword">val</span> ensure_extracted_archive : 
  <span><span class="label">url</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">archive_path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">extract_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">check_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Ensure an archive is downloaded, extracted, and a file exists.</p><p>Checks if <code>check_file</code> (relative to <code>extract_dir</code>) exists. If not, downloads the archive from <code>url</code> to <code>archive_path</code>, extracts it into <code>extract_dir</code>, and verifies <code>check_file</code> is present. Currently supports only .tar.gz archives.</p><p>Parameters</p><ul><li>url: the source URL of the archive.</li><li>archive_path: local path for the downloaded archive.</li><li>extract_dir: directory to extract the archive into.</li><li>check_file: relative path under <code>extract_dir</code> to verify extraction.</li></ul><p>Raises</p><ul><li><code>Failure</code> on download, extraction, or missing <code>check_file</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ensure_decompressed_gz"><a href="#val-ensure_decompressed_gz" class="anchor"></a><code><span><span class="keyword">val</span> ensure_decompressed_gz : <span><span class="label">gz_path</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">target_path</span>:string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Ensure a gzip-compressed file is decompressed to a target path.</p><p>If <code>target_path</code> exists, does nothing and returns <code>true</code>. Otherwise, if <code>gz_path</code> exists, decompresses it to <code>target_path</code>.</p><p>Parameters</p><ul><li>gz_path: the path to the .gz file to decompress.</li><li>target_path: the destination path for the decompressed file.</li></ul><p>Returns</p><ul><li><code>true</code> if <code>target_path</code> exists after the operation.</li><li><code>false</code> if <code>gz_path</code> does not exist.</li></ul><p>Raises</p><ul><li><code>Failure</code> on gzip decompression error.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_float_cell"><a href="#val-parse_float_cell" class="anchor"></a><code><span><span class="keyword">val</span> parse_float_cell : <span><span class="label">context</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Parse a CSV cell as a float.</p><p>Attempts to convert <code>value</code> to a float. On failure, raises <code>Failure</code> with a descriptive message including <code>context ()</code>.</p><p>Parameters</p><ul><li>context: a function returning context information for error messages.</li><li>value: the string to parse as a float.</li></ul><p>Returns</p><ul><li>the parsed float.</li></ul><p>Raises</p><ul><li><code>Failure</code> if <code>value</code> cannot be parsed as a float.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_int_cell"><a href="#val-parse_int_cell" class="anchor"></a><code><span><span class="keyword">val</span> parse_int_cell : <span><span class="label">context</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Parse a CSV cell as an integer.</p><p>Attempts to convert <code>value</code> to an int. On failure, raises <code>Failure</code> with a descriptive message including <code>context ()</code>.</p><p>Parameters</p><ul><li>context: a function returning context information for error messages.</li><li>value: the string to parse as an int.</li></ul><p>Returns</p><ul><li>the parsed integer.</li></ul><p>Raises</p><ul><li><code>Failure</code> if <code>value</code> cannot be parsed as an int.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkdir_p"><a href="#val-mkdir_p" class="anchor"></a><code><span><span class="keyword">val</span> mkdir_p : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Recursively create a directory and its parents.</p><p>Creates the directory at <code>path</code>, along with any missing parent directories. If <code>path</code> already exists as a directory, does nothing.</p><p>Parameters</p><ul><li>path: the directory path to create.</li></ul><p>Raises</p><ul><li><code>Unix.Unix_error</code> if creation fails for other reasons.</li></ul></div></div></div></body></html>
